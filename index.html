<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic CSS Grid Layout</title>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="image-inputs.css">
    <link rel="stylesheet" href="webgl.css">
</head>
<body>
    <!-- App Header -->
    <div class="app-header">
        <h1 class="app-title">sv dynamic grid v1.0</h1>
        <div class="header-credit">MADE BY STUDIO-VIDEO</div>
    </div>
        <div class="main-container">
            <!-- Side Panel -->
            <div class="side-panel">
                <div class="panel-header">
                    <h3>Image Upload</h3>
                    <button class="help-btn" id="helpBtn" onclick="window.imageGridManager.showHelp()">?</button>
                </div>
                <div class="upload-section">
                    <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                    
                    <button class="upload-btn" onclick="document.getElementById('imageUpload').click()">
                        Choose Image
                    </button>
                    
                    <button class="control-btn" id="clearAllBtn">Clear Image</button>
                    
                    <div class="sequence-info" id="sequenceInfo" style="display: none;">
                        <span id="sequenceStatus">No sequence loaded</span>
                    </div>
                    
                    <label for="imageFitMode" class="dropdown-label">Image Fit Mode:</label>
                    <div class="custom-dropdown" id="imageFitModeDropdown">
                        <div class="dropdown-trigger" data-value="fill">
                            <span class="dropdown-text">stretch</span>
                            <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8">
                                <path fill="currentColor" d="M6 8L0 0h12z"/>
                            </svg>
                        </div>
                        <div class="dropdown-menu">
                            <div class="dropdown-option" data-value="fill">
                                <span>stretch</span>
                                <svg class="dropdown-check" width="14" height="10" viewBox="0 0 14 10">
                                    <path fill="currentColor" d="M13 1L5 9 1 5"/>
                                </svg>
                            </div>
                            <div class="dropdown-option" data-value="contain">
                                <span>fit</span>
                                <svg class="dropdown-check" width="14" height="10" viewBox="0 0 14 10">
                                    <path fill="currentColor" d="M13 1L5 9 1 5"/>
                                </svg>
                            </div>
                            <div class="dropdown-option" data-value="cover">
                                <span>fill</span>
                                <svg class="dropdown-check" width="14" height="10" viewBox="0 0 14 10">
                                    <path fill="currentColor" d="M13 1L5 9 1 5"/>
                                </svg>
                            </div>
                            <div class="dropdown-option" data-value="debug-corners">
                                <span>corner stretch</span>
                                <svg class="dropdown-check" width="14" height="10" viewBox="0 0 14 10">
                                    <path fill="currentColor" d="M13 1L5 9 1 5"/>
                                </svg>
                            </div>
                            <div class="dropdown-option" data-value="background">
                                <span>single stretch</span>
                                <svg class="dropdown-check" width="14" height="10" viewBox="0 0 14 10">
                                    <path fill="currentColor" d="M13 1L5 9 1 5"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
                
                <h4 class="section-divider">Grid Structure</h4>
                    <div class="grid-control-row">
                        <label>Columns:</label>
                        <button class="grid-btn" id="removeColumnBtn" onclick="window.imageGridManager && window.imageGridManager.removeColumn()">-</button>
                        <span id="columnCount">3</span>
                        <button class="grid-btn" id="addColumnBtn" onclick="window.imageGridManager && window.imageGridManager.addColumn()">+</button>
                    </div>
                    <div class="grid-control-row">
                        <label>Rows:</label>
                        <button class="grid-btn" id="removeRowBtn" onclick="window.imageGridManager && window.imageGridManager.removeRow()">-</button>
                        <span id="rowCount">3</span>
                        <button class="grid-btn" id="addRowBtn" onclick="window.imageGridManager && window.imageGridManager.addRow()">+</button>
                    </div>
                    <div class="grid-control-row">
                        <label for="showSplitters">Show Dividers:</label>
                        <input type="checkbox" id="showSplitters" class="toggle-switch" checked>
                    </div>
                    
                    <h4 class="section-divider">Animation</h4>
                    <div class="animation-control-row">
                        <label for="animationToggle">Animate Grid:</label>
                        <input type="checkbox" id="animationToggle" class="toggle-switch">
                    </div>
                    <div class="animation-controls-row">
                        <div class="animation-type-group">
                            <button class="type-btn active" data-type="noise">NOISE</button>
                            <button class="type-btn" data-type="pulse">PULSE</button>
                        </div>
                        <div class="animation-axis-group">
                            <button class="axis-btn active" data-axis="xy">XY</button>
                            <button class="axis-btn" data-axis="x">X</button>
                            <button class="axis-btn" data-axis="y">Y</button>
                        </div>
                    </div>
                    <div class="animation-control-row">
                        <label for="frequencySlider">Frequency:</label>
                        <input type="range" id="frequencySlider" min="0.1" max="2" step="0.1" value="0.5" class="control-slider">
                        <span id="frequencyValue" class="animation-slider-value">0.5</span>
                    </div>
                    <div class="animation-control-row">
                        <label for="amplitudeSlider">Amplitude:</label>
                        <input type="range" id="amplitudeSlider" min="0.1" max="1" step="0.1" value="0.3" class="control-slider">
                        <span id="amplitudeValue" class="animation-slider-value">0.3</span>
                    </div>
                    <div class="animation-control-row" id="holdControlRow" style="display: none;">
                        <label for="holdSlider">Hold:</label>
                        <input type="range" id="holdSlider" min="0.1" max="2" step="0.1" value="0.5" class="control-slider">
                        <span id="holdValue" class="animation-slider-value">0.5</span>
                    </div>
                    
                    <h4 class="section-divider">Canvas Size</h4>
                    <div class="canvas-control-row">
                        <label for="canvasWidth">Width:</label>
                        <input type="text" id="canvasWidth" value="800" class="size-input">
                        <span>px</span>
                    </div>
                    <div class="canvas-control-row">
                        <label for="canvasHeight">Height:</label>
                        <input type="text" id="canvasHeight" value="600" class="size-input">
                        <span>px</span>
                    </div>
                    <label for="canvasSizePreset" class="dropdown-label">Preset:</label>
                    <div class="custom-dropdown dropdown-up" id="canvasSizePresetDropdown">
                        <div class="dropdown-trigger" data-value="custom">
                            <span class="dropdown-text">Custom</span>
                            <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8">
                                <path fill="currentColor" d="M6 8L0 0h12z"/>
                            </svg>
                        </div>
                        <div class="dropdown-menu">
                            <div class="dropdown-option" data-value="custom">
                                <span>Custom</span>
                                <svg class="dropdown-check" width="14" height="10" viewBox="0 0 14 10">
                                    <path fill="currentColor" d="M13 1L5 9 1 5"/>
                                </svg>
                            </div>
                            <div class="dropdown-option" data-value="ig-post">
                                <span>IG Post (1080×1350)</span>
                                <svg class="dropdown-check" width="14" height="10" viewBox="0 0 14 10">
                                    <path fill="currentColor" d="M13 1L5 9 1 5"/>
                                </svg>
                            </div>
                            <div class="dropdown-option" data-value="ig-reel">
                                <span>IG Reel (1080×1920)</span>
                                <svg class="dropdown-check" width="14" height="10" viewBox="0 0 14 10">
                                    <path fill="currentColor" d="M13 1L5 9 1 5"/>
                                </svg>
                            </div>
                            <div class="dropdown-option" data-value="wide-hd">
                                <span>Wide HD (1920×1080)</span>
                                <svg class="dropdown-check" width="14" height="10" viewBox="0 0 14 10">
                                    <path fill="currentColor" d="M13 1L5 9 1 5"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <h4 class="section-divider">Background</h4>
                    <div class="background-control-row">
                        <label for="canvasBackgroundColor">Color:</label>
                        <input type="color" id="canvasBackgroundColor" value="#181818" class="color-picker">
                    </div>
                    <div class="background-control-row">
                        <label for="transparentBackground">Transparent:</label>
                        <input type="checkbox" id="transparentBackground" class="toggle-switch">
                    </div>
                    
                <h4 class="section-divider">Export</h4>
                <button class="control-btn export-btn" id="exportVideoBtn">Record MP4</button>
            </div>
            
            <!-- Grid Content Area -->
            <div class="grid-content-area">
                <!-- Grid Scaling Wrapper -->
                <div class="grid-scaling-wrapper" id="gridScalingWrapper">
                    <!-- Grid Container -->
                    <div class="grid-container" id="gridContainer">
                    <div class="grid-item" data-cell="1">
                        <div class="cell-content">
                            <div class="image-wrapper">
                                <!-- Image will be inserted here -->
                            </div>
                            <div class="cell-label">1</div>
                        </div>
                    </div>
                    <div class="grid-item" data-cell="2">
                        <div class="cell-content">
                            <div class="image-wrapper">
                                <!-- Image will be inserted here -->
                            </div>
                            <div class="cell-label">2</div>
                        </div>
                    </div>
                    <div class="grid-item" data-cell="3">
                        <div class="cell-content">
                            <div class="image-wrapper">
                                <!-- Image will be inserted here -->
                            </div>
                            <div class="cell-label">3</div>
                        </div>
                    </div>
                    <div class="grid-item" data-cell="4">
                        <div class="cell-content">
                            <div class="image-wrapper">
                                <!-- Image will be inserted here -->
                            </div>
                            <div class="cell-label">4</div>
                        </div>
                    </div>
                    <div class="grid-item" data-cell="5">
                        <div class="cell-content">
                            <div class="image-wrapper">
                                <!-- Image will be inserted here -->
                            </div>
                            <div class="cell-label">5</div>
                        </div>
                    </div>
                    <div class="grid-item" data-cell="6">
                        <div class="cell-content">
                            <div class="image-wrapper">
                                <!-- Image will be inserted here -->
                            </div>
                            <div class="cell-label">6</div>
                        </div>
                    </div>
                    <div class="grid-item" data-cell="7">
                        <div class="cell-content">
                            <div class="image-wrapper">
                                <!-- Image will be inserted here -->
                            </div>
                            <div class="cell-label">7</div>
                        </div>
                    </div>
                    <div class="grid-item" data-cell="8">
                        <div class="cell-content">
                            <div class="image-wrapper">
                                <!-- Image will be inserted here -->
                            </div>
                            <div class="cell-label">8</div>
                        </div>
                    </div>
                    <div class="grid-item" data-cell="9">
                        <div class="cell-content">
                            <div class="image-wrapper">
                                <!-- Image will be inserted here -->
                            </div>
                            <div class="cell-label">9</div>
                        </div>
                    </div>
                    
                    <!-- Vertical Splitters (for column resizing) -->
                    <div class="splitter vertical" data-index="0"></div>
                    <div class="splitter vertical" data-index="1"></div>
                    
                    <!-- Horizontal Splitters (for row resizing) -->
                    <div class="splitter horizontal" data-index="0"></div>
                    <div class="splitter horizontal" data-index="1"></div>
                </div>
                </div>
            </div>
        </div>

    <!-- Export Modal -->
    <div class="export-modal" id="exportModal">
        <div class="export-modal-content">
            <div class="export-modal-header">
                <h3>Record Video</h3>
                <button class="export-close-btn" onclick="window.imageGridManager.closeExportModal()">×</button>
            </div>
            <div class="export-modal-body">
                <div class="export-section">
                    <label for="recordingDuration" class="export-label">Recording Duration</label>
                    <div class="duration-input-group">
                        <input type="number" id="recordingDuration" class="duration-input" min="1" max="60" value="5" step="0.1">
                        <span class="duration-unit">seconds</span>
                    </div>
                    <div class="duration-info">
                        <p>Maximum duration: 60 seconds</p>
                    </div>
                </div>
                
                <div class="export-section">
                    <div class="export-format-info">
                        <h4>Export Details</h4>
                        <div class="format-details">
                            <div class="detail-row">
                                <span class="detail-label">Format:</span>
                                <span class="detail-value">MP4 (H.264)</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Quality:</span>
                                <span class="detail-value">High (2x Resolution)</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Frame Rate:</span>
                                <span class="detail-value">60 FPS</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="export-modal-footer">
                <button class="export-modal-btn cancel-btn" onclick="window.imageGridManager.closeExportModal()">Cancel</button>
                <button class="export-modal-btn record-btn" onclick="window.imageGridManager.startRecordingFromModal()">Start Recording</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="help-modal" id="helpModal">
        <div class="help-modal-content">
            <div class="help-modal-header">
                <h3>How to Use Grid Tool</h3>
                <button class="help-close-btn" onclick="window.imageGridManager.closeHelp()">×</button>
            </div>
            <div class="help-modal-body">
                <div class="help-section">
                    <h4>📸 Upload Image</h4>
                    <p>Click "Choose Image" to upload any image file. It will fill all grid cells.</p>
                </div>
                
                <div class="help-section">
                    <h4>📐 Adjust Grid</h4>
                    <p>Use + and - buttons to add/remove columns and rows. Drag the gray lines to resize cells.</p>
                </div>
                
                <div class="help-section">
                    <h4>🎛️ Image Fit Modes</h4>
                    <p><strong>Stretch:</strong> Image stretches to fill each cell<br>
                    <strong>Fit:</strong> Image fits inside cell keeping proportions<br>
                    <strong>Fill:</strong> Image fills cell completely<br>
                    <strong>Corner Stretch:</strong> Advanced stretching for UI elements</p>
                </div>
                
                <div class="help-section">
                    <h4>✨ Animation</h4>
                    <p>Turn on "Animate Grid" to make cells move smoothly. Adjust frequency (speed) and amplitude (movement amount).</p>
                </div>
                
                <div class="help-section">
                    <h4>📹 Export</h4>
                    <p>Click "Record MP4" to save your grid as a high-quality video file.</p>
                </div>
                
                <div class="help-section">
                    <h4>🧹 Reset</h4>
                    <p>Click "Clear Image" to remove all images and return to numbered grid.</p>
                </div>
            </div>
        </div>
    </div>
    
    <script src="common.js"></script>
    <script src="image-inputs.js"></script>
    <script src="webgl.js"></script>
</body>
</html> 